#!/usr/bin/env node

var libdb = require('./libdb.js')
var iterateOnFile = libdb.iterateOnFile;
var recordMatched = libdb.recordMatched;

var query = eval('(' + process.argv[3] + ')');

var inspect = require('util').inspect;
var find = function find (record) {
    if ( recordMatched(record, query) ) {
        process.stdout.write(JSON.stringify(record) + '\n');
    }
};

iterateOnFile( find );
